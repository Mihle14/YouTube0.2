<%= turbo_frame_tag dom_id(comment) do %>
  <div class="border-l-2 border-[#3f3f3f] pl-4 mb-6">
    <div class="flex justify-between items-start">
      <div>
        <p class="text-gray-200 font-semibold"><%= comment.user.email %></p>
        <p class="text-gray-300 mb-2"><%= comment.body %></p>
      </div>

      <% if user_signed_in? %>
        <%= button_to "Delete",
            post_comment_path(comment.post, comment),
            method: :delete,
            data: { turbo_frame: dom_id(comment), confirm: "Are you sure?" },
            class: "text-red-500 hover:text-red-700 text-sm ml-2 px-2 py-1 rounded" %>
      <% end %>
    </div>

    <% comment.replies.each do |reply| %>
      <%= render partial: "comments/comment", locals: { comment: reply } %>
    <% end %>

    <% if user_signed_in? %>
      <%= form_with model: [comment.post, Comment.new], local: false, data: { turbo_frame: dom_id(comment) }, class: "mt-2 flex gap-2" do |f| %>
        <%= f.hidden_field :parent_id, value: comment.id %>
        <%= f.text_field :body,
          placeholder: "Reply...",
          class: "flex-1 p-2 rounded-lg bg-[#121212] text-white border border-[#3f3f3f]" %>
        <%= f.submit "Reply",
          class: "px-3 py-1 rounded-lg bg-[#3f3f3f] text-white hover:bg-[#4a4a4a] transition" %>
      <% end %>
    <% end %>
  </div>
<% end %>
